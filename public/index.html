<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Word Guess Game - Tr√≤ ch∆°i ƒëo√°n t·ª´</title>
    <link rel="stylesheet" href="/style.css" />
    <style>
      .invite-notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: var(--secondary-hover);
        color: white;
        padding: 20px;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        z-index: 1000;
        display: none;
        flex-direction: column;
        gap: 10px;
        max-width: 300px;
      }
      .invite-notification button {
        background-color: var(--success);
        color: white;
        border: none;
        padding: 8px 15px;
        cursor: pointer;
        border-radius: 8px;
        transition: var(--transition);
        width: auto;
        max-width: none;
        margin: 0;
        box-shadow: none;
      }
      .invite-notification button:hover {
        background-color: #388e3c;
      }
      .invite-notification .reject-btn {
        background-color: var(--danger);
      }
      .invite-notification .reject-btn:hover {
        background-color: #d32f2f;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div
        id="header"
        style="
          width: 100%;
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
          border-bottom: 1px solid var(--gray-light);
          padding-bottom: 10px;
        "
      >
        <p style="font-size: 1.2rem; font-weight: 600; margin: 0">
          Xin ch√†o, <span id="displayName">Ng∆∞·ªùi ch∆°i</span>!
        </p>
        <p style="margin: 0; color: var(--secondary-hover); font-weight: 600">
          ƒêi·ªÉm cao nh·∫•t : <span id="userTotalScore">0</span>
        </p>
      </div>

      <div id="lobbyScreen" class="screen active" style="display: flex">
        <h1>WordGuess Game</h1>
        <p>H√£y b·∫Øt ƒë·∫ßu tr√≤ ch∆°i ngay n√†o !!!</p>

        <div class="lobby-buttons">
          <button id="singlePlayerBtn">Ch∆°i M·ªôt Ng∆∞·ªùi</button>
          <button id="createRoomBtn">T·∫°o Ph√≤ng M·ªõi</button>
          <button id="showRankingBtn">B·∫£ng X·∫øp H·∫°ng</button>
          <button
            id="logoutBtn"
            class="danger-btn"
            style="max-width: 300px; margin-top: 10px"
          >
            ƒêƒÉng Xu·∫•t
          </button>
        </div>

        <h3 style="margin-top: 30px">Tham gia ph√≤ng</h3>
        <div style="display: flex; gap: 10px; width: 100%; max-width: 400px">
          <input
            id="roomSearchInput"
            class="input"
            placeholder="Nh·∫≠p ID ph√≤ng ..."
            style="margin-bottom: 0; flex-grow: 1"
          />
          <button id="searchRoomBtn" style="max-width: 120px; margin: 0">
            Tham gia
          </button>
        </div>
        <p
          id="lobbyErrorMessage"
          class="error-message"
          style="margin-top: 10px"
        ></p>
      </div>

      <div id="singlePlayerSettingsScreen" class="screen" style="display: none">
        <h1>C√†i ƒë·∫∑t Ch∆°i ƒê∆°n</h1>
        <p>Vui l√≤ng ch·ªçn ch·∫ø ƒë·ªô v√† b·ªô t·ª´ b·∫°n mu·ªën ch∆°i.</p>

        <div style="width: 100%; max-width: 350px; text-align: left">
          <label
            for="singlePlayerModeSelect"
            style="font-weight: 600; color: var(--gray)"
            >Ch·∫ø ƒë·ªô ch∆°i:</label
          >
          <select
            id="singlePlayerModeSelect"
            class="input"
            style="margin-bottom: 15px"
          >
            <option value="reverse">ƒêo√°n Ti·∫øng Vi·ªát</option>
            <option value="normal">ƒêo√°n Ti·∫øng Anh</option>
          </select>

          <label
            for="singlePlayerWordPackSelect"
            style="font-weight: 600; color: var(--gray)"
            >B·ªô t·ª´:</label
          >
          <select
            id="singlePlayerWordPackSelect"
            class="input"
            style="margin-bottom: 25px"
          ></select>
        </div>

        <div
          class="lobby-buttons"
          style="flex-direction: row; max-width: 350px"
        >
          <button id="startSinglePlayerGameBtn" style="flex: 2">B·∫Øt ƒê·∫ßu</button>
          <button
            id="backToLobbyFromSingleBtn"
            class="danger-btn"
            style="flex: 1"
          >
            Quay L·∫°i
          </button>
        </div>
      </div>

      <div id="roomScreen" class="screen" style="display: none">
        <h1 id="roomNameDisplay">Ph√≤ng Ch∆°i (ID: ...)</h1>

        <p id="roomHostDisplay" class="room-host-tag"></p>

        <div class="room-content">
          <div class="room-settings-panel">
            <h2 style="margin-top: 0">‚öôÔ∏è C√†i ƒê·∫∑t</h2>
            <div id="roomSettingsDiv">
              <label for="roomNameInput">T√™n ph√≤ng:</label>
              <input
                id="roomNameInput"
                class="input"
                placeholder="Nh·∫≠p t√™n ph√≤ng..."
                disabled
              />

              <label for="roomMode">Ch·∫ø ƒë·ªô ch∆°i:</label>
              <select id="roomMode" class="input" disabled>
                <option value="reverse">
                  ƒêo√°n Ti·∫øng Vi·ªát
                </option>
                <option value="normal">
                  ƒêo√°n Ti·∫øng Anh
                </option>
              </select>

              <label for="roomWordPack">B·ªô t·ª´:</label>
              <select id="roomWordPack" class="input" disabled></select>

              <p id="settingsMessage"></p>
            </div>
          </div>

          <div class="room-players-panel">
            <h2 style="margin-top: 0">
              üë• Ng∆∞·ªùi Ch∆°i (<span id="roomPlayersCount">0</span>)
            </h2>
            <div
              id="roomPlayersList"
              class="score-list"
              style="max-height: 250px; overflow-y: auto"
            ></div>

            <div id="inviteSection" style="margin-top: 20px; display: none">
              <h3
                style="
                  margin-top: 0;
                  margin-bottom: 10px;
                  color: var(--secondary-hover);
                "
              >
                M·ªùi B·∫°n B√®
              </h3>
              <input
                id="inviteUsernameInput"
                class="input"
                placeholder="Nh·∫≠p username c·ªßa b·∫°n b√®..."
                style="margin-bottom: 10px"
              />
              <button
                id="invitePlayerBtn"
                style="max-width: none; margin: 0; padding: 10px"
              >
                G·ª≠i L·ªùi M·ªùi
              </button>
              <p
                id="inviteMessage"
                class="error-message"
                style="margin-top: 10px"
              ></p>
            </div>
          </div>
        </div>

        <div
          class="room-actions"
          style="
            margin-top: 30px;
            display: flex;
            gap: 15px;
            width: 100%;
            max-width: 450px;
          "
        >
          <button
            id="startRoomBtn"
            class="primary-btn"
            style="display: none; flex-grow: 1"
          >
            ‚ñ∂Ô∏è B·∫Øt ƒê·∫ßu Game
          </button>
          <button id="leaveRoomBtn" class="danger-btn" style="flex-grow: 1">
            ‚ùå Tho√°t Ph√≤ng
          </button>
        </div>
      </div>

      <div id="gameScreen" class="screen" style="display: none">
        <h1 id="gameRoomName">ƒêang ch∆°i</h1>
        <p class="game-info">
          V√≤ng <span id="currentRound">1</span> /
          <span id="maxRounds">10</span>
        </p>

        <h2 style="color: var(--danger)">
          Th·ªùi gian: <span id="timer">60</span>
        </h2>

        <img id="hintImage" src="" alt="G·ª£i √Ω h√¨nh ·∫£nh" style="display: none" />

        <p class="game-info" id="currentHintType"></p>

        <div id="wordDisplay">_ _ _ _ _ _</div>


        <input
          type="text"
          id="guessInput"
          class="input"
          placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n v√† nh·∫•n Enter..."
          autocomplete="off"
        />

        <h3 id="message"></h3>

        <button
          id="endGameBtn"
          class="danger-btn"
          style="margin-top: 10px; max-width: 220px"
        >
          üõë K·∫øt th√∫c v√°n
        </button>
        <p id="singleCurrentScore" style="margin-top: 8px; font-weight: 600; color: #333;">
          ƒêi·ªÉm hi·ªán t·∫°i: 0
        </p>
                <div id="gameScoreBoard" class="score-list"></div>
      </div>

      <div id="endScreen" class="screen" style="display: none">
        <h1 id="endMessage">Tr√≤ ch∆°i k·∫øt th√∫c!</h1>
        <div
          class="results"
          style="margin-top: 20px; width: 100%; max-width: 400px"
        >
          <h3>üèÜ B·∫£ng x·∫øp h·∫°ng V√≤ng n√†y üèÜ</h3>
          <div id="finalScores" class="score-list"></div>
        </div>
        <div
          class="end-buttons"
          style="display: flex; gap: 15px; margin-top: 30px"
        >
          <button id="backToLobbyBtn" style="flex-grow: 1">Quay l·∫°i</button>
          <button id="showGlobalRankingBtn" style="flex-grow: 1">
            Xem B·∫£ng X·∫øp H·∫°ng
          </button>
        </div>
      </div>

      <div id="rankingScreen" class="screen" style="display: none">
        <h1>B·∫£ng X·∫øp H·∫°ng</h1>
        <p>Top 10 ng∆∞·ªùi ch∆°i c√≥ t·ªïng ƒëi·ªÉm cao nh·∫•t.</p>
        <div
          id="globalRankingList"
          class="score-list"
          style="max-height: 450px; overflow-y: auto"
        ></div>
        <button id="backFromRankingBtn" style="margin-top: 20px">
          Quay l·∫°i
        </button>
      </div>
    </div>

    <div id="inviteNotification" class="invite-notification">
      <p>
        <span id="inviteRoomName"></span>
      </p>
      <div style="display: flex; gap: 10px">
        <button id="acceptInviteBtn">Ch·∫•p nh·∫≠n</button>
        <button id="rejectInviteBtn" class="reject-btn">T·ª´ ch·ªëi</button>
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/game_bundle.js"></script>
  </body>
</html>
